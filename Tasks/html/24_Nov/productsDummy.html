<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Single product</title>
    <link rel="stylesheet" href="/dist/output.css">
</head>

<body>
    <main>
        <div class="container mx-auto">
            <div class="flex">
                <!-- Product image -->
                <div class="w-1/2">
                    <img id="js-image" alt="Product Image" class="w-full h-auto">
                </div>

                <!-- Product information -->
                <div class="w-1/2 p-8">
                    <h1 class="text-3xl font-bold mb-4" id="js-title">Product Name</h1>
                    <p class="text-gray-600 mb-4" id="js-description">Product Description</p>
                    <p class="text-2xl text-orange-500 font-bold mb-4" id="js-price">$99.99</p>

                    <!-- Add to Cart button -->
                    <button type="button" class="bg-blue-500 text-white px-4 py-2 rounded">Add to Cart</button>
                </div>
            </div>
        </div>
        </div>
    </main>
    <script>
        (function () {
            "use strict"
            const singleProduct = {
                render: async function () {
                    const title = document.querySelector('#js-title');
                    const description = document.querySelector('#js-description')
                    const price = document.querySelector('#js-price')
                    const image = document.querySelector('#js-image')

                    const urlParam = this.productId()
                    console.log(urlParam)

                    try {
                        const response = await fetch(`https://dummyjson.com/products/${urlParam}`);
                        if (response.ok) {
                            const data = await response.json();

                            if (data.id == urlParam) {
                                image.src = data.thumbnail;
                                title.innerHTML = data.title;
                                description.innerHTML = data.description;
                                price.innerHTML = `$${data.price}`;
                            }
                        }
                        else {
                            throw new Error('Error');
                        }
                    }
                    catch (error) {
                        console.error('Error fetching data:', error);
                        return null;
                    }
                },

                productId: function () {
                    const keysValues = window.location.search;
                    const urlParams = new URLSearchParams(keysValues)
                    const param = urlParams.get('id')
                    return param
                }
            }
            singleProduct.render()
        })()
    </script>
</body>

</html>