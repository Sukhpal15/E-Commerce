<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/dist/output.css">
</head>

<body class="bg-gray-100">
    <div class="mt-20 space-y-10">
        <div class="flex justify-center">
            <input type="text" class="border-2 w-64 p-1 rounded-lg shadow-lg" placeholder="Search name" id="js_search">
        </div>
        <div class="flex justify-center">
            <div class="w-3/5 flex justify-center bg-white p-5 rounded-lg shadow-lg">
                <table class="text-center w-full">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Website</th>
                        </tr>
                    </thead>
                    <tbody id="js_tbody"></tbody>
                </table>
            </div>
        </div>
    </div>
</body>
<script>
    'use strict'
    let fetchApi = {
        dataObjects: fetch("https://jsonplaceholder.typicode.com/users").then((value) => {
            return value.json();
        }),
        render: function () {
            const tbody = document.getElementById('js_tbody')
            this.dataObjects.then((data) => {
                data.map((item, index) => {
                    console.log(item)
                    let rowTable = tbody.insertRow();
                    rowTable.insertCell(0).innerHTML = item.id;
                    rowTable.insertCell(1).innerHTML = item.name;
                    rowTable.insertCell(2).innerHTML = item.email;
                    rowTable.insertCell(3).innerHTML = item.website;
                });
                console.log(data)
            })
            this.searchInput()
        },

        searchInput: function () {
            const search = document.getElementById('js_search')

            search.addEventListener("input", () => {
                this.dataObjects.then((data) => {
                    let relatedItems = data.filter((item) => {
                        return item.name
                            .toLowerCase()
                            .startsWith(search.value.toLowerCase());
                    });

                    let tbody = document.getElementById('js_tbody');
                    tbody.innerHTML = "";
                    relatedItems.forEach((item, index) => {
                        let tabelRow = tbody.insertRow();
                        tabelRow.insertCell(0).innerHTML = item.id;
                        tabelRow.insertCell(1).innerHTML = item.name;
                        tabelRow.insertCell(2).innerHTML = item.email;
                        tabelRow.insertCell(3).innerHTML = item.website;
                    });

                })
            });
        }
    }
    fetchApi.render()
</script>

</html>