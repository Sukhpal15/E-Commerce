<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drag and Drop</title>
    <link rel="stylesheet" href="/./dist/output.css" />
  </head>

  <body class="bg-green-950">
    <div class="flex flex-col gap-10 items-center justify-center h-screen">
      <div>
        <input
          type="text"
          placeholder="Enter Your Task"
          class="flex h-10 w-80 p-2 rounded-md"
          id="js_input"
        />
      </div>
      <div id="js_container" class="flex gap-10 text-white">
        <div
          id="js_assigned"
          class="border-2 rounded-lg shadow-md shadow-stone-500 border-dashed border-green-950 bg-stone-200 p-3 w-80 h-96 overflow-auto"
        >
          <h2
            class="font-semibold text-lg text-green-950 p-2 border-b-2 border-b-green-950"
          >
            Assigned Tasks
          </h2>
          <ul class="pt-4 mt-2 space-y-5" id="assignedUl">
            <li
              class="taskLists p-2 rounded-md font-medium bg-green-950"
              draggable="true"
            >
              Create Custom Alert Buttons
            </li>
            <li
              class="taskLists p-2 rounded-md font-medium bg-green-950"
              draggable="true"
            >
              Create Custom Slider
            </li>
            <li
              class="taskLists p-2 rounded-md font-medium bg-green-950"
              draggable="true"
            >
              Create Drag And Drop Using Javascript
            </li>
            <li
              class="taskLists p-2 rounded-md font-medium bg-green-950"
              draggable="true"
            >
              Create Quiz Using JavaScript
            </li>
            <li
              class="taskLists p-2 rounded-md font-medium bg-green-950"
              draggable="true"
            >
              Create Image Cropping App
            </li>
          </ul>
        </div>
        <div
          id="js_pending"
          class="border-2 rounded-lg shadow-md shadow-stone-500 border-dashed border-green-950 bg-stone-200 p-3 w-80 h-96 overflow-auto"
        >
          <h2
            class="font-semibold text-lg text-green-950 p-2 border-b-2 border-b-green-950"
          >
            Pending Tasks
          </h2>
          <ul class="pt-4 mt-2 space-y-5" id="pendingUl"></ul>
        </div>
        <div
          id="js_completed"
          class="border-2 rounded-lg shadow-md shadow-stone-500 border-dashed border-green-950 bg-stone-200 p-3 w-80 h-96 overflow-auto"
        >
          <h2
            class="font-semibold text-lg text-green-950 p-2 border-b-2 border-b-green-950"
          >
            Completed Tasks
          </h2>
          <ul class="pt-4 mt-2 space-y-5" id="completedUl"></ul>
        </div>
      </div>
    </div>
    <script>
      let inputt = document.getElementById("js_input");
      let taskLi = document.getElementsByClassName("taskLists");
      let assigned = document.getElementById("js_assigned");
      let pending = document.getElementById("js_pending");
      let completed = document.getElementById("js_completed");
      let ulAssigned = document.getElementById("assignedUl");
      let ulPending = document.getElementById("pendingUl");
      let ulCompleted = document.getElementById("completedUl");
      let button = document.getElementById("js_button");

      // Function to save data to localStorage
      function saveToLocalStorage() {
        localStorage.setItem("assignedTasks", ulAssigned.innerHTML);
        localStorage.setItem("pendingTasks", ulPending.innerHTML);
      }

      // Function to retrieve data from localStorage
      function loadFromLocalStorage() {
        ulAssigned.innerHTML = localStorage.getItem("assignedTasks");
        ulPending.innerHTML = localStorage.getItem("pendingTasks");
      }

      let selected;

      function dragLists(e) {
        selected = e.target;
        console.log(selected);
        document.addEventListener("drop", () => {
          saveToLocalStorage();
        });
        document.addEventListener("dragover", (e) => {
          e.preventDefault();
        });
        pending.addEventListener("drop", (e) => {
          ulPending.appendChild(selected);
        });
        assigned.addEventListener("drop", (e) => {
          ulAssigned.appendChild(selected);
        });
        completed.addEventListener("drop", (e) => {
          ulCompleted.appendChild(selected);
        });
      }

      function addTask() {
        if (inputt.value.trim() !== "") {
          let li = document.createElement("li");
          li.className = "taskLists p-2 rounded-md font-medium bg-green-950";
          li.draggable = true;
          li.textContent = inputt.value;
          li.addEventListener("dragstart", dragLists);
          ulAssigned.appendChild(li);
          saveToLocalStorage();
          inputt.value = "";
        }
      }

      function loopOnLists(e) {
        inputt.addEventListener("keydown", (event) => {
          if (event.key === "Enter") {
            addTask();
          }
        });
        for (list of taskLi) {
          list.addEventListener("dragstart", dragLists);
        }
      }
      window.addEventListener("load", (e) => {
        loopOnLists(e);
        saveToLocalStorage();
      });
      if (
        localStorage.getItem("assignedTasks") ||
        localStorage.getItem("pendingTasks")
      ) {
        loadFromLocalStorage();
      }
    </script>
  </body>
</html>
