<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="/dist/output.css">
</head>

<body class="font-sans">
    <!-- nav bar -->
    <nav class="bg-white shadow-lg sticky top-0 z-20">
        <ul class="flex justify-around p-4 items-center">
            <li>
                <button type="button"><img
                        src="https://static-assets-web.flixcart.com/batman-returns/batman-returns/p/images/fkheaderlogo_exploreplus-44005d.svg"
                        alt="logo"></button>
            </li>
            <li class="w-1/2 mx-2">
                <input type="search" class="border-2 w-full h-12 p-2 rounded-lg focus:outline-none"
                    placeholder="Search Product">
            </li>
            <li>
                <button type="button"><svg class="w-8 h-8 text-gray-700" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 16 16" fill="currentColor">
                        <path fill="currentColor"
                            d="M14 13.1v-1.1h-9.4l0.6-1.1 9.2-0.9 1.6-6h-12.3l-0.7-3h-3v1h2.2l2.1 8.4-1.3 2.6v1.5c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5-0.7-1.5-1.5-1.5h7.5v1.5c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5c0-0.7-0.4-1.2-1-1.4zM4 5h10.7l-1.1 4-8.4 0.9-1.2-4.9z">
                        </path>
                    </svg></button>
            </li>
            <li>
                <button type="button"><svg class="w-8 h-8 text-gray-700" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 15 15" fill="none">
                        <path
                            d="M.5 4.5h14m-10-4v14m-3-14h12a1 1 0 011 1v12a1 1 0 01-1 1h-12a1 1 0 01-1-1v-12a1 1 0 011-1z"
                            stroke="currentColor"></path>
                    </svg></button>
            </li>
        </ul>
    </nav>

    <!-- main -->
    <main id="js-main" class="bg-white">
        <ul id="js-productsList" class="flex pb-5 flex-wrap gap-8 space-y-12 justify-center items-end bg-white"></ul>
    </main>

    <!-- script -->
    <script>
        (function () {
            "use strict"
            const products = {
                //base url
                baseUrl: 'https://dummyjson.com/products',

                //fetch all products
                fetch: async function () {
                    try {
                        const respone = await fetch(this.baseUrl);
                        if (respone.ok) {
                            const data = await respone.json();
                            return data;
                        }
                    }
                    catch (error) {
                        console.error("Error fetching data:", error);
                    }
                },

                //render data
                render: async function () {
                    const data = await this.fetch();
                    const productsContainer = data.products;
                    const productsList = document.getElementById("js-productsList")
                    let products = ``
                    productsContainer.forEach((element, index) => {
                        const uniqueId = `gallery-${index}`;
                        products += `<li id="${uniqueId}"
                        data-product-id="${element.id}"
                        class="w-80 hover:shadow-md hover:shadow-gray-400 rounded-lg flex flex-col cursor-pointer p-2 transform transition-transform duration-300 ease-in-out hover:scale-105 border border-gray-300">

                        <!-- image -->
                        <div class="w-full h-44">
                            <img class="w-full h-full object-cover rounded-md shadow-md hover:shadow-lg" src="${element.thumbnail}" alt="Product Image">
                        </div>

                        <!-- description -->
                        <div class="p-4 space-y-2 text-center">
                            <h2 class="line-clamp-2 text-xl font-semibold text-gray-800">${element.title}</h2>

                            <!-- rating -->
                            <div class="flex gap-3 items-center justify-center">
                                <div class="bg-green-700 items-center gap-1 text-white pl-2 flex py-0.5 rounded-sm text-sm relative w-16">
                                    ${element.rating}
                                    <svg class=" h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd"></path>
                                        </svg>
                                </div>

                                <!-- price -->
                                <div class="flex space-x-2 items-center">
                                    <span class="font-semibold text-lg">&#8377;${element.price}</span>
                                </div>
                            </div>

                            <div class="flex gap-5 justify-center">
                            <!-- add to cart button with hover effect -->
                            <button type="button" name="cartButton"
                                class="bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none w-40">View</button>
                                
                            <button type="button" name="cartButton"
                                class="bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none w-40"
                                data-id="${element.id}">Add To Cart</button>
                            </div>
                        </div>
                    </li>`;
                    });
                    productsList.innerHTML = products;
                },

                //small helping functions
                methods: {},

                //call functions
                init: function () { this.render() }
            }
            products.init();
        })()
    </script>
</body>

</html>